"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[1077],{76534:function(e,i,n){var t=n(59860),l=n(13967),o=n(20792),a=n(91614),d=n(68870),r=n(20890),s=n(94721),c=n(53767),u=(n(72791),n(32939)),v=n(24422),h=n(80184),f={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:550,bgcolor:"background.paper",boxShadow:24,borderRadius:"10px"};i.Z=function(e){var i=e.openModal,n=e.handleClose,p=e.handleSubmit,g=e.children,m=e.title,x=void 0===m?"Add New Crop":m,Z=e.disabled,b=e.isLoading,j=(0,l.Z)();return(0,h.jsx)(o.Z,{"aria-labelledby":"modal-title","aria-describedby":"modal-description",open:i,onClose:n,disableEnforceFocus:!1,disableAutoFocus:!1,sx:{outline:0},children:(0,h.jsx)(a.Z,{sx:{maxWidth:{xl:"2600px",position:"relative",borderRadius:"20px",height:"100%"}},children:(0,h.jsxs)(d.Z,{sx:f,children:[(0,h.jsxs)(d.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"10px 10px 0 0",p:2,bgcolor:j.palette.primary.lighter,children:[(0,h.jsx)(r.Z,{variant:"h6",color:j.palette.grey[0],sx:{letterSpacing:"0.7px"},children:x}),(0,h.jsx)(t.Z,{onClick:n,sx:{minWidth:0,padding:.2,display:"flex",alignItems:"center",borderRadius:"50%",bgcolor:j.palette.common.white,":hover":{bgcolor:j.palette.common.white}},children:(0,h.jsx)(u.Z,{icon:"iconamoon:close-bold",width:24,height:24,color:j.palette.common.black})})]}),(0,h.jsx)(s.Z,{}),b?(0,h.jsx)(v.VJ,{}):(0,h.jsx)(d.Z,{mt:2,children:g}),(0,h.jsxs)(c.Z,{direction:"row",spacing:2,justifyContent:"flex-end",p:2,children:[(0,h.jsx)(t.Z,{variant:"outlined",onClick:n,fullWidth:!0,sx:{p:1},children:"Cancel"}),(0,h.jsx)(t.Z,{variant:"contained",disabled:Z,onClick:p,fullWidth:!0,sx:{p:1},children:"Delete"})]})]})})})}},32687:function(e,i,n){var t=n(59860),l=n(13967),o=n(20792),a=n(91614),d=n(68870),r=n(20890),s=n(94721),c=n(53767),u=n(72791),v=n(32939),h=n(86446),f=n(73019),p=n(9440),g=n(24422),m=n(80184),x={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:550,bgcolor:"background.paper",boxShadow:24,borderRadius:"10px"};i.Z=function(e){var i=e.openModal,n=e.handleClose,Z=e.children,b=e.methods,j=e.onSubmit,C=e.id,S=(e.cropDetails,e.handleCropDetails),w=e.title,k=void 0===w?"Add New Crop":w,y=e.disabled,D=e.isLoading,L=(0,l.Z)(),I=(0,p.I0)();(0,u.useEffect)((function(){C&&(I((0,f.Av)()),S())}),[C]);var P=b.handleSubmit;b.formState.isSubmitting;return(0,m.jsx)(o.Z,{"aria-labelledby":"modal-title","aria-describedby":"modal-description",open:i,onClose:n,disableEnforceFocus:!1,disableAutoFocus:!1,sx:{outline:0},children:(0,m.jsx)(a.Z,{sx:{maxWidth:{xl:"2600px",position:"relative",borderRadius:"20px",height:"100%"}},children:(0,m.jsx)(d.Z,{sx:x,children:(0,m.jsxs)(h.RV,{methods:b,onSubmit:P(j),children:[(0,m.jsxs)(d.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",borderRadius:"10px 10px 0 0",p:2,bgcolor:L.palette.primary.lighter,children:[(0,m.jsx)(r.Z,{variant:"h6",color:L.palette.grey[0],sx:{letterSpacing:"0.7px"},children:k}),(0,m.jsx)(t.Z,{onClick:n,sx:{minWidth:0,padding:.2,display:"flex",alignItems:"center",borderRadius:"50%",bgcolor:L.palette.common.white,":hover":{bgcolor:L.palette.common.white}},children:(0,m.jsx)(v.Z,{icon:"iconamoon:close-bold",width:24,height:24,color:L.palette.common.black})})]}),(0,m.jsx)(s.Z,{}),D?(0,m.jsx)(g.VJ,{}):(0,m.jsx)(d.Z,{mt:2,children:Z}),(0,m.jsx)(s.Z,{}),(0,m.jsxs)(c.Z,{direction:"row",spacing:2,justifyContent:"flex-end",p:2,children:[(0,m.jsx)(t.Z,{variant:"outlined",onClick:n,children:"Cancel"}),(0,m.jsx)(t.Z,{type:"submit",variant:"contained",disabled:y,startIcon:(0,m.jsx)(v.Z,{icon:C?"fa-solid:user-edit":"mingcute:user-add-fill"}),children:C?"Save":"Add"})]})]})})})})}},77762:function(e,i,n){n.d(i,{ZP:function(){return o}});var t=n(29439),l=n(72791);function o(e){var i=(0,l.useState)((null===e||void 0===e?void 0:e.defaultDense)||!1),n=(0,t.Z)(i,2),o=n[0],a=n[1],d=(0,l.useState)((null===e||void 0===e?void 0:e.defaultOrderBy)||"name"),r=(0,t.Z)(d,2),s=r[0],c=r[1],u=(0,l.useState)((null===e||void 0===e?void 0:e.defaultOrder)||"asc"),v=(0,t.Z)(u,2),h=v[0],f=v[1],p=(0,l.useState)((null===e||void 0===e?void 0:e.defaultCurrentPage)||0),g=(0,t.Z)(p,2),m=g[0],x=g[1],Z=(0,l.useState)((null===e||void 0===e?void 0:e.defaultRowsPerPage)||5),b=(0,t.Z)(Z,2),j=b[0],C=b[1],S=(0,l.useState)((null===e||void 0===e?void 0:e.defaultSelected)||[]),w=(0,t.Z)(S,2),k=w[0],y=w[1];return{dense:o,order:h,page:m,setPage:x,orderBy:s,rowsPerPage:j,selected:k,setSelected:y,onSelectRow:function(e){var i=k.indexOf(e),n=[];-1===i?n=n.concat(k,e):0===i?n=n.concat(k.slice(1)):i===k.length-1?n=n.concat(k.slice(0,-1)):i>0&&(n=n.concat(k.slice(0,i),k.slice(i+1))),y(n)},onSelectAllRows:function(e,i){y(e?i:[])},onSort:function(e){""!==e&&(f(s===e&&"asc"===h?"desc":"asc"),c(e))},onChangePage:function(e,i){x(i)},onChangeDense:function(e){a(e.target.checked)},onChangeRowsPerPage:function(e){C(parseInt(e.target.value,10)),x(0)}}}},23744:function(e,i,n){n.d(i,{Z:function(){return o}});var t=n(29439),l=n(72791);function o(e){var i=(0,l.useState)(e||""),n=(0,t.Z)(i,2),o=n[0],a=n[1];return{currentTab:o,onChangeTab:function(e,i){a(i)},setCurrentTab:a}}},1077:function(e,i,n){n.r(i),n.d(i,{default:function(){return K}});var t=n(15861),l=n(1413),o=n(29439),a=n(64687),d=n.n(a),r=n(77942),s=n(72791),c=n(91614),u=n(36151),v=n(57621),h=n(39281),f=n(79836),p=n(53382),g=n(68870),m=n(26812),x=n(9440),Z=(n(56777),n(77762)),b=n(23744),j=n(53451),C=n(54737),S=n(7055),w=n(97145),k=n(50765),y=n(94474),D=n(32687),L=n(61134),I=n(61265),P=n(17449),V=n(86951),R=n(32939),T=n(47733),M=n(76534),E=n(90163),N=n(52791),W=n(86446),_=n(80184),A=[{id:"state",label:"State",name:"State",value:"state"},{id:"district",label:"District",name:"District",value:"district"},{id:"taluk",label:"Taluk",name:"Taluk",value:"taluk"},{id:"village",label:"Village",name:"Village",value:"village"}],G=function(e){e.statusList,e.handleTalukSelect,e.handleDistrictSelect;var i,n=e.handleLocationChange,t=e.handleStatesSelect,l=e.methods,o=e.state,a=(e.isLoading,(0,x.v9)((function(e){return e.user}))),d=a.statesList,r=l.watch;return(0,_.jsxs)(N.Z,{sx:{display:"grid",columnGap:2,rowGap:2,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(1, 1fr)"},p:2},children:[(0,_.jsx)(W.Wo,{name:"location",label:"Select location",placeholder:"location",value:r("location"),options:A,onChange:n,disabled:!0}),(null===(i=["district","taluk","village"])||void 0===i?void 0:i.includes(r("location")))&&(0,_.jsx)(W.Wo,{name:"selectStates",label:"Select States",placeholder:"States",value:r("selectStates"),options:d||[],onChange:t,disabled:!(null===o||void 0===o||!o.id)}),(0,_.jsx)(W.au,{name:"name",label:"Name",placeholder:"Name"})]})},U=n(13967),F=n(35855),q=n(53994),B=n(20890),O=n(23786);function z(e){var i=e.row,n=e.handleShowDetails,t=e.onhandleDeleteRow,l=e.onhandleEditDetails,a=((0,U.Z)(),(0,s.useState)(null)),d=(0,o.Z)(a,2),r=d[0],c=d[1],u=function(){c(null)},v=i||{},h=v.id,f=v.name,p=v.farmerCount,g=v.checkUpperGeo,m=(0,T.C)("state",g);(0,T.C)("district",g),(0,T.C)("taluk",g);return(0,_.jsxs)(F.Z,{hover:!0,onClick:function(){return n&&n(h)},sx:{textTransform:"capitalize"},children:[(0,_.jsx)(q.Z,{sx:{display:"flex",alignItems:"center"},children:(0,_.jsx)(B.Z,{variant:"subtitle2",noWrap:!0,children:f})}),(0,_.jsx)(q.Z,{children:(0,_.jsx)(B.Z,{variant:"subtitle2",noWrap:!0,children:null!==m&&void 0!==m&&m.id?null===m||void 0===m?void 0:m.name:"--"})}),(0,_.jsx)(q.Z,{children:(0,_.jsx)(B.Z,{variant:"subtitle2",noWrap:!0,children:p||"--"})}),(0,_.jsx)(q.Z,{align:"left",children:(0,_.jsx)(k.V7,{open:r,onOpen:function(e){c(e.currentTarget)},onClose:u,actions:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(O.Z,{onClick:function(){l&&l(h),u()},children:[(0,_.jsx)(R.Z,{icon:"eva:edit-fill"}),"Edit"]}),(0,_.jsxs)(O.Z,{onClick:function(){t&&t(h,f),u()},sx:{color:"error.main"},children:[(0,_.jsx)(R.Z,{icon:"eva:trash-2-outline"}),"Delete"]})]})})})]})}var J=[{id:"district",label:"District Name",align:"left"},{id:"state",label:"State",align:"left"},{id:"nofarmer",label:"Farmer Count",align:"left"},{id:"action",label:"Action",align:"left"}];function K(){var e=(0,Z.ZP)(),i=e.page,n=e.order,a=e.orderBy,N=e.rowsPerPage,W=e.selected,A=e.onChangePage,U=e.onChangeRowsPerPage,F=(e.setPage,(0,s.useState)("")),q=(0,o.Z)(F,2),B=q[0],O=(q[1],(0,s.useState)("")),K=(0,o.Z)(O,2),Y=K[0],H=(K[1],(0,V.Ds)().enqueueSnackbar),X=(0,x.I0)(),Q=(0,s.useState)({id:"",selectStages:"",openModal:!1,villageId:null,parentId:"",stateId:"",districtId:"",talukId:"",isLoading:!1,openDeleteModal:!1,VillageName:""}),$=(0,o.Z)(Q,2),ee=$[0],ie=$[1];console.log("state",ee);var ne=(0,b.Z)("all").currentTab;(0,s.useEffect)((function(){te(),(0,P.yU)()}),[]);var te=function(){(0,y.Cy)("","","district")},le=(0,x.v9)((function(e){return e.locations})),oe=le.locationData,ae=le.districtLoactionList,de=le.isLoading,re=(0,x.v9)((function(e){return e.user})),se=re.districtList;(0,s.useEffect)((function(){if(X((0,P.Vc)(null)),null!==oe&&void 0!==oe&&oe.id&&null!==ee&&void 0!==ee&&ee.id){var e,i;ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isLoading:!0})}));var n=(0,T.C)("state",null===oe||void 0===oe?void 0:oe.checkUpperGeo),t=(0,T.C)("district",null===oe||void 0===oe?void 0:oe.checkUpperGeo);if(pe("selectStates",null===n||void 0===n?void 0:n.id),pe("location",null===oe||void 0===oe||null===(e=oe.checkUpperGeo)||void 0===e?void 0:e.entityType),pe("name",null===oe||void 0===oe||null===(i=oe.checkUpperGeo)||void 0===i?void 0:i.name),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isLoading:!1})})),oe&&null!==n&&void 0!==n&&n.id)if((0,P.YV)(null===n||void 0===n?void 0:n.id),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isLoading:!1})})),oe&&null!==t&&void 0!==t&&t.id&&null!==se&&void 0!==se&&se.childEntities)(0,P.sK)(null===t||void 0===t?void 0:t.id),pe("selectDistrict",(null===t||void 0===t?void 0:t.id)||""),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isLoading:!1})}));else if(oe&&null!==n&&void 0!==n&&n.id&&(null===t||void 0===t||!t.id)){var o;pe("selectDistrict",(null===oe||void 0===oe||null===(o=oe.checkUpperGeo)||void 0===o?void 0:o.id)||""),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isLoading:!1})}))}}}),[null===oe||void 0===oe?void 0:oe.id,null===ee||void 0===ee?void 0:ee.id]);var ce=(0,s.useMemo)((function(){return{location:"",selectStates:"",selectDistrict:"",selectTaluk:"",name:""}}),[]),ue=r.Ry().shape({location:r.Z_().required("Location is required"),name:r.Z_().required("Name is required").max(50,"Limit of 50 characters"),selectStates:r.Z_().when("location",{is:function(e){return"district"===e||"taluk"===e||"village"===e},then:r.Z_().required("State is required"),otherwise:r.Z_()})}),ve=(0,L.cI)({resolver:(0,I.X)(ue),defaultValues:ce}),he=(ve.reset,ve.watch),fe=(ve.setError,ve.clearErrors),pe=ve.setValue,ge=(ve.handleSubmit,ve.formState.isSubmitting,["location","name","selectDistrict","selectStates","selectTaluk"]),me=!(null!==ae&&void 0!==ae&&ae.length)&&!!B||!(null!==ae&&void 0!==ae&&ae.length)&&!!Y||!(null!==ae&&void 0!==ae&&ae.length)&&!!B||!(null!==ae&&void 0!==ae&&ae.length)&&!!ne,xe=function(){(0,P.yU)(),pe("selectStates",""),pe("selectDistrict",""),pe("selectTaluk",""),pe("name","")},Ze=function(e){ie((function(i){return(0,l.Z)((0,l.Z)({},i),{},{openModal:!0,id:e,isLoading:!0})}))},be=function(){X((0,P.Vc)(null)),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{openModal:!1,id:"",isLoading:!1})})),ge.forEach((function(e){return fe(e)}))},je=function(){var e=(0,t.Z)(d().mark((function e(i){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,l.Z)({name:null===i||void 0===i?void 0:i.name,entityType:null===i||void 0===i?void 0:i.location},(null===ee||void 0===ee?void 0:ee.parentId)&&{parentId:null===ee||void 0===ee?void 0:ee.parentId}),null!==ee&&void 0!==ee&&ee.id?X((0,y.Bl)(n,null===ee||void 0===ee?void 0:ee.id)).then((function(e){var i,n,t,o;if(200===(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.statusCode))H(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message,{variant:"success"}),te(),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isLoading:!1})})),be(),X((0,P.Vc)(null)),X((0,y.c4)(null));else if(409===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.statusCode)){var a;H(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message,{variant:"error"}),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isLoading:!1})}))}else if(422===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.statusCode)){var d;H(null===e||void 0===e||null===(d=e.data)||void 0===d?void 0:d.message,{variant:"error"}),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isLoading:!1})}))}else{var r;H(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message,{variant:"error"}),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isLoading:!1})})),be()}})):X((0,y.Vx)(n)).then((function(e){var i,n,t,l;if(201===(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.statusCode))H(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message,{variant:"success"}),te(),be();else if(409===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.statusCode)){var o;H(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message,{variant:"error"})}else if(422===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.statusCode)){var a;H(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message,{variant:"error"})}}));case 2:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}(),Ce=function(e,i){ie((function(n){return(0,l.Z)((0,l.Z)({},n),{},{openDeleteModal:!0,id:e,VillageName:i})}))};return(0,_.jsxs)(j.Z,{title:"District",children:[(0,_.jsxs)(c.Z,{maxWidth:"xl",children:[(0,_.jsx)(C.Z,{heading:"District List",links:[{href:S.vB.location.root}],action:(0,_.jsx)(u.Z,{variant:"contained",startIcon:(0,_.jsx)(R.Z,{icon:"eva:plus-fill"}),onClick:function(){ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{openModal:!0,id:""})})),pe("location","district"),xe()},children:"Add Geolocation"})}),(0,_.jsxs)(v.Z,{sx:{pt:2},children:[(0,_.jsx)(w.Z,{children:(0,_.jsx)(h.Z,{sx:{minWidth:800,position:"relative"},children:(0,_.jsxs)(f.Z,{size:"medium",children:[(0,_.jsx)(k.K,{order:n,orderBy:a,headLabel:J,rowCount:null===ae||void 0===ae?void 0:ae.length,numSelected:W.length}),(0,_.jsx)(p.Z,{children:!de||null!==ae&&void 0!==ae&&ae.length?null!==ae&&void 0!==ae&&ae.length?ae.slice(i*N,i*N+N).map((function(e){return(0,_.jsx)(z,{row:e,onhandleDeleteRow:Ce,onhandleEditDetails:Ze},e.id)})):(0,_.jsx)(k.et,{isNotFound:me}):(0,_.jsx)(k.hM,{})})]})})}),(0,_.jsx)(g.Z,{sx:{position:"relative"},children:(0,_.jsx)(m.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:null!==ae&&void 0!==ae&&ae.length?ae.length:0,rowsPerPage:N,page:i,onPageChange:A,onRowsPerPageChange:U})})]})]}),(0,_.jsx)(D.Z,{openModal:ee.openModal,isLoading:ee.isLoading,handleClose:be,onSubmit:je,methods:ve,id:null===ee||void 0===ee?void 0:ee.id,handleCropDetails:function(){ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{isLoading:!0})})),(0,y.U_)(null===ee||void 0===ee?void 0:ee.id)},title:ee.id?"Edit District location":"Add District Geo Location",disabled:function(){var e,i,n;return(null===oe||void 0===oe||null===(e=oe.checkUpperGeo)||void 0===e?void 0:e.name)===he("name")||null===(i=he("name"))||void 0===i||!i.length||null===(n=he("selectStates"))||void 0===n||!n.length}(),children:(0,_.jsx)(G,{state:ee,methods:ve,handleLocationChange:xe,handleStatesSelect:function(e){ie((function(i){return(0,l.Z)((0,l.Z)({},i),{},{parentId:e,stateId:e})})),(0,P.YV)(e),pe("selectDistrict",""),pe("selectTaluk",""),pe("name","")},isLoading:ee.isLoading})}),(0,_.jsx)(M.Z,{openModal:ee.openDeleteModal,handleClose:function(){ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{openDeleteModal:!1,id:"",VillageName:""})}))},title:"Delete Confirmation!",handleSubmit:function(){X((0,y.uw)(null===ee||void 0===ee?void 0:ee.id)).then((function(e){var i,n;200===(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.statusCode)?(H(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message,{variant:"success"}),(0,y.Dm)(),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{openDeleteModal:!1,id:"",VillageName:""})}))):((0,y.Dm)(),ie((function(e){return(0,l.Z)((0,l.Z)({},e),{},{openDeleteModal:!1,id:"",VillageName:""})})))})).catch((function(e){console.log("error")}))},children:(0,_.jsx)(E.I,{userName:null===ee||void 0===ee?void 0:ee.VillageName})})]})}},90163:function(e,i,n){n.d(i,{I:function(){return d}});var t=n(68870),l=n(20890),o=n(32939),a=n(80184),d=function(e){var i=e.userName;return(0,a.jsxs)(t.Z,{sx:{p:2,minHeight:"180px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",textAlign:"center"},children:[(0,a.jsx)(t.Z,{sx:{width:80,height:80,borderRadius:"50%",backgroundColor:"#FDECF2",display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:(0,a.jsx)(o.Z,{icon:"mingcute:delete-2-line",sx:{fontSize:32,color:"#E91E63"}})}),(0,a.jsxs)(l.Z,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:["Are you sure you want to remove ",i,"?"]})]})}},47733:function(e,i,n){n.d(i,{C:function(){return t}});var t=function(e,i){var n;return i?(null===i||void 0===i?void 0:i.entityType)===e?i:null===i||void 0===i||null===(n=i.parents)||void 0===n?void 0:n.find((function(i){return(null===i||void 0===i?void 0:i.entityType)===e})):null}},52791:function(e,i,n){var t=(0,n(23814).Z)();i.Z=t}}]);
//# sourceMappingURL=1077.fe994521.chunk.js.map