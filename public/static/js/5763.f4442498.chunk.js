"use strict";(self.webpackChunk_minimal_material_kit_react=self.webpackChunk_minimal_material_kit_react||[]).push([[5763],{45763:function(e,n,l){l.r(n),l.d(n,{default:function(){return M}});var i=l(1413),a=l(29439),t=l(72791),r=l(16871),o=l(91614),s=l(57621),d=l(39281),u=l(79836),c=l(53382),g=l(68870),v=l(26812),h=l(7055),f=l(23744),m=l(77762),x=l(53451),p=l(97145),Z=l(54737),j=l(50765),b=l(35285),P=l(9440),k=l(56777),S=l(13967),w=l(35855),C=l(53994),T=l(20890),D=l(23786),y=l(32939),W=l(34132),Y=l(80184);function _(e){var n,l,i,r,o,s,d=e.row,u=e.handleShowDetails,c=e.onhandleDeleteRow,g=((0,S.Z)(),(0,t.useState)(null)),v=(0,a.Z)(g,2),h=v[0],f=v[1],m=function(){f(null)},x=d||{},p=x.farmer,Z=x.village,b=x.level,P=x.stages,k=x.id;return(0,Y.jsxs)(w.Z,{hover:!0,sx:{cursor:"default"},children:[(0,Y.jsx)(C.Z,{sx:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:function(){return u&&u(k)},children:(0,Y.jsx)(T.Z,{variant:"subtitle2",noWrap:!0,sx:{textTransform:"capitalize"},children:null===p||void 0===p?void 0:p.name})}),(0,Y.jsx)(C.Z,{children:(0,Y.jsx)(T.Z,{variant:"subtitle2",noWrap:!0,sx:{textTransform:"capitalize"},children:null===Z||void 0===Z?void 0:Z.name})}),(0,Y.jsx)(C.Z,{children:(0,Y.jsx)(T.Z,{variant:"subtitle2",noWrap:!0,children:b})}),(0,Y.jsx)(C.Z,{children:(0,Y.jsx)(T.Z,{variant:"subtitle2",noWrap:!0,sx:{textTransform:"capitalize"},children:null===P||void 0===P||null===(n=P[0])||void 0===n?void 0:n.stageName})}),(0,Y.jsx)(C.Z,{children:(0,Y.jsx)(T.Z,{variant:"subtitle2",noWrap:!0,sx:{textTransform:"capitalize"},children:null!==P&&void 0!==P&&null!==(l=P[0])&&void 0!==l&&null!==(i=l.updatedbySevek)&&void 0!==i&&i.name?null===P||void 0===P||null===(r=P[0])||void 0===r||null===(o=r.updatedbySevek)||void 0===o?void 0:o.name:"--"})}),(0,Y.jsx)(C.Z,{onClick:function(){return u&&u(k)},children:(0,Y.jsx)(T.Z,{variant:"subtitle2",noWrap:!0,sx:{textTransform:"capitalize"},children:(0,W.w)(null===P||void 0===P||null===(s=P[0])||void 0===s?void 0:s.created)})}),(0,Y.jsx)(C.Z,{align:"left",children:(0,Y.jsx)(j.V7,{open:h,onOpen:function(e){f(e.currentTarget)},onClose:m,actions:(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)(D.Z,{onClick:function(){c&&c(k),m()},sx:{color:"error.main"},children:[(0,Y.jsx)(y.Z,{icon:"eva:trash-2-outline"}),"Delete"]})})})})]})}var z=l(86951),F=[{id:"name",label:"Farmer name",align:"left"},{id:"village",label:"Village name",align:"left"},{id:"number of pits",label:"Pit level",align:"left"},{id:"stage name",label:"Stage name",align:"left"},{id:"update by sevak",label:"Update by sevak",align:"left"},{id:"last update",label:"Last update",align:"left"},{id:"action",label:"Action",align:"left"}];function M(){var e=(0,m.ZP)(),n=e.page,l=e.order,S=e.orderBy,w=e.rowsPerPage,C=e.selected,T=e.onChangePage,D=e.onChangeRowsPerPage,y=e.setPage,W=(0,r.s0)(),M=(0,t.useState)(""),N=(0,a.Z)(M,2),L=N[0],R=N[1],B=(0,z.Ds)().enqueueSnackbar,V=(0,P.I0)(),I=(0,t.useState)(""),O=(0,a.Z)(I,2),q=O[0],A=O[1],E=(0,t.useState)({selectStages:""}),K=(0,a.Z)(E,2),U=K[0],G=K[1],H=(0,f.Z)("all").currentTab;(0,t.useEffect)((function(){(0,k.PT)()}),[]);var J=(0,P.v9)((function(e){return e.pits})),Q=J.pitListData,X=function(e){W(h.vB.pits.details(e))},$=function(e){V((0,k.R6)(e)).then((function(e){var n,l;200===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.statusCode)?(B(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message,{variant:"success"}),(0,k.PT)()):(0,k.PT)()})).catch((function(){console.log("error")}))},ee=!(null!==Q&&void 0!==Q&&Q.length)&&!!L||!(null!==Q&&void 0!==Q&&Q.length)&&!!q||!(null!==Q&&void 0!==Q&&Q.length)&&!!L||!(null!==Q&&void 0!==Q&&Q.length)&&!!H;return(0,Y.jsx)(x.Z,{title:"Pits List",children:(0,Y.jsxs)(o.Z,{maxWidth:"xl",children:[(0,Y.jsx)(Z.Z,{heading:"Pits List",links:[{href:h.vB.pits.list}]}),(0,Y.jsxs)(s.Z,{children:[(0,Y.jsx)(b.N,{filterName:L,filterVillage:q,onFilterName:function(e){R(e)},onFilterVillage:function(e){A(e)},onSearch:function(){y(0);var e=U.selectStages;(0,k.PT)(L,q,e)},placeholderText:"Search by farmer name",placeholderTextSecond:"Search by village name",pits:!0,stagesName:[{id:"1",name:"marking",value:"marking",label:"Marking"},{id:"2",name:"digging",value:"digging",label:"Digging"},{id:"3",name:"filling",value:"filling",label:"Filling"},{id:"4",name:"maintenance",value:"maintenance",label:"Maintenance"}],onChange:function(e){G((function(n){return(0,i.Z)((0,i.Z)({},n),{},{selectStages:e})}))},state:U}),(0,Y.jsx)(p.Z,{children:(0,Y.jsx)(d.Z,{sx:{minWidth:800,position:"relative"},children:(0,Y.jsxs)(u.Z,{size:"medium",children:[(0,Y.jsx)(j.K,{order:l,orderBy:S,headLabel:F,rowCount:null===Q||void 0===Q?void 0:Q.length,numSelected:C.length}),(0,Y.jsxs)(c.Z,{children:[null!==Q&&void 0!==Q&&Q.length?Q.slice(n*w,n*w+w).map((function(e){return(0,Y.jsx)(_,{row:e,handleShowDetails:X,onhandleDeleteRow:$},e.id)})):null,(0,Y.jsx)(j.et,{isNotFound:ee})]})]})})}),(0,Y.jsx)(g.Z,{sx:{position:"relative"},children:(0,Y.jsx)(v.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:null!==Q&&void 0!==Q&&Q.length?Q.length:0,rowsPerPage:w,page:n,onPageChange:T,onRowsPerPageChange:D})})]})]})})}},34132:function(e,n,l){l.d(n,{w:function(){return t},r:function(){return r}});var i=l(72426),a=l.n(i);function t(e){return a()(e).format("MM/DD/YYYY")}function r(e){return a()(e).format("MM/DD/YYYY hh:mm a")}}}]);
//# sourceMappingURL=5763.f4442498.chunk.js.map